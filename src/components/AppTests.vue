<template>
	<main>
		<article>
			<h2>–¢–µ—Å—Ç—ã</h2>
			<div class="choose-subj">
				<div class="variants-list">
					<span class="variants-title">–ü—Ä–µ–¥–º–µ—Ç</span>
					<ul>
						<li @click="getTests(subj)" :class="[currentSubj === subj ? 'active' : '']" v-for="(subj, i) of subjects"
							:key="i">{{ subj }}</li>
					</ul>
				</div>
				<div v-if="subjTests" class="variants-list">
					<span class="variants-title">–¢–µ—Å—Ç</span>
					<ul>
						<li @click="loadTest(test)" :class="[currentTest === test ? 'active' : '']" v-for="(test, i) of subjTests"
							:key="i">{{ test }}</li>
					</ul>
				</div>
			</div>
		</article>

		<aside v-if="currentTest">
			<TheTest :title="currentTest" :testTasks="testTasks"></TheTest>
		</aside>

	</main>
</template>

<script>
import TheTest from './TheTest.vue';

export default {
	components: { TheTest },

	data() {
		return {
			subjTests: null,
			currentSubj: null,
			currentTest: null,
		};
	},

	computed: {
		loadSubjects() {
			// fetch
			/* HINTS
			type1 - –ó–∞–¥–∞—á–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –æ—Ç–≤–µ—Ç–æ–≤
			type2 - –ó–∞–¥–∞—á–∞ —Å –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º —Å–ª–æ–≤–∞. –í –æ—Ç–≤–µ—Ç–µ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–ø–∏—Å–∞—Ç—å –º–∞—Å—Å–∏–≤ –∏–∑ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–ª–æ–≤ (—Å–∫–ª–æ–Ω–µ–Ω–∏—è –∏—Ç–ø. –ü–∏—Å–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã)
			*/
			const allSubjs = {
				"–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞": {
					"–ö–µ–Ω–≥—É—Ä—É 2012 - 2 –∫–ª–∞—Å—Å": [
						{
							"taskId": 1,
							"type": 1,
							"description": "–õ–µ–Ω–∞ –Ω–∞–ø–∏—Å–∞–ª–∞ —Å–ª–æ–≤–æ –ö–ï–ù–ì–£–†–£ –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥. –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–Ω–∞ –Ω–∞–ø–∏—Å–∞–ª–∞ –±—É–∫–≤—É –£?",
							"variants": ["1", "2", "3", "4", "6"],
							"answer": 3
						},
						{
							"taskId": 2,
							"type": 1,
							"description": "–°–µ–≥–æ–¥–Ω—è –ê—Ä–∏–Ω–∞ —Å–ª–æ–∂–∏–ª–∞ —Å–≤–æ–π –≤–æ–∑—Ä–∞—Å—Ç –∏ –≤–æ–∑—Ä–∞—Å—Ç —Å–µ—Å—Ç—Ä—ã, —É –Ω–µ–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å 10. –ö–∞–∫–æ–π –±—É–¥–µ—Ç —Å—É–º–º–∞ –∏—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –≥–æ–¥?",
							"variants": ["5", "12", "11", "10", "20"],
							"answer": 2
						},
						{
							"taskId": 3,
							"type": 1,
							"description": "–í –±–æ–ª—å—à–æ–º —è—â–∏–∫–µ –ª–µ–∂–∞—Ç —Ç—Ä–∏ —è—â–∏–∫–∞ –ø–æ–º–µ–Ω—å—à–µ, –∞ –≤ –∫–∞–∂–¥–æ–º –∏–∑ —ç—Ç–∏—Ö —è—â–∏–∫–æ–≤ –ª–µ–∂–∏—Ç –µ—â–µ –ø–æ —Ç—Ä–∏ —è—â–∏–∫–∞. –°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ —è—â–∏–∫–æ–≤?",
							"variants": ["9", "10", "12", "13", "15"],
							"answer": 3
						},
					],
					"–ö–µ–Ω–≥—É—Ä—É 2023 - 2 –∫–ª–∞—Å—Å": [
						{
							"taskId": 1,
							"type": 1,
							"description": "–ú–∞–º–∞ –∫—É–ø–∏–ª–∞ –≤–æ–∑–¥—É—à–Ω—ã–µ —à–∞—Ä–∏–∫–∏ –∏ —Ä–∞–∑–¥–µ–ª–∏–ª–∞ –∏—Ö –ø–æ—Ä–æ–≤–Ω—É –º–µ–∂–¥—É –°–∞—à–µ–π –∏ –ü–µ—Ç–µ–π. –°–∞—à–µ –¥–æ—Å—Ç–∞–ª–∏—Å—å —à–∞—Ä–∏–∫–∏ —á–µ—Ç—ã—Ä–µ—Ö —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤, –∫–∞–∂–¥–æ–≥–æ —Ü–≤–µ—Ç–∞ –ø–æ —Ç—Ä–∏ —à—Ç—É–∫–∏.–°–∫–æ–ª—å–∫–æ —à–∞—Ä–∏–∫–æ–≤ –∫—É–ø–∏–ª–∞ –º–∞–º–∞?",
							"variants": ["12", "18", "24", "36", "48"],
							"answer": 2
						},
						{
							"taskId": 2,
							"type": 1,
							"description": "–ï—Å—Ç—å —à–∞–±–ª–æ–Ω –∏–∑ –ø—è—Ç–∏ —Ñ–∏–≥—É—Ä–æ–∫: ‚òÄÔ∏èü§°üê±üåôüî•. –î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ä—è–¥–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω, –Ω–µ –º–µ–Ω—è—è –ø–æ—Ä—è–¥–æ–∫ —Ñ–∏–≥—É—Ä–æ–∫. –ö–∞–∫–∞—è –∏–∑ –ø—è—Ç–∏ —Ñ–∏–≥—É—Ä–æ–∫ –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ 27-–º –º–µ—Å—Ç–µ –≤ —ç—Ç–æ–º —Ä—è–¥—É?",
							"variants": ["‚òÄÔ∏è", "ü§°", "üê±", "üåô", "üî•"],
							"answer": 1
						},
						{
							"taskId": 3,
							"type": 1,
							"description": "–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –¢–æ–ª—è –ø–æ–¥–Ω—è–ª—Å—è –Ω–∞ —Ç—Ä–µ—Ç—å—é —Å—Ç—É–ø–µ–Ω—å–∫—É –ª–µ—Å—Ç–Ω–∏—Ü—ã, –æ–Ω —Å—Ç–∞–ª —à–∞–≥–∞—Ç—å —á–µ—Ä–µ–∑ –æ–¥–Ω—É —Å—Ç—É–ø–µ–Ω—å–∫—É. –ù–∞ –∫–∞–∫–æ–π —Å—Ç—É–ø–µ–Ω—å–∫–µ –æ–Ω –æ–∫–∞–∂–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç—Ä—ë—Ö —Ç–∞–∫–∏—Ö —à–∞–≥–æ–≤?",
							"variants": ["5", "6", "7", "9", "11"],
							"answer": 3
						},
					],
				},

				"–†—É—Å—Å–∫–∏–π —è–∑—ã–∫": {
					"–†—É—Å—Å–∫–∏–π –º–µ–¥–≤–µ–∂–æ–Ω–æ–∫ 2023 - 1 –∫–ª–∞—Å—Å": [
						{
							"taskId": 1,
							"type": 1,
							"description": "–í—á–µ—Ä–∞ –±—ã–ª.. –ö–∞–∫–∏–º —Å–ª–æ–≤–æ–º –Ω–µ–ª—å–∑—è –∑–∞–∫–æ–Ω—á–∏—Ç—å —Ñ—Ä–∞–∑—É?",
							"variants": ["–í–µ—Ç–µ—Ä", "–î–æ–∂–¥—å", "–°–Ω–µ–≥", "–Ø—Å–Ω–æ"],
							"answer": 3
						},
						{
							"taskId": 2,
							"type": 1,
							"description": "–ö–∞–∫–æ–µ –∏–º—è –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –µ—Å–ª–∏ –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∞ –º–µ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞? –Ø —Ö–æ—á—É –¥—Ä—É–∂–∏—Ç—å —Å ‚Ä¶",
							"variants": ["–ù–µ–∑–Ω–∞–π–∫–∞", "–í–∏–Ω–Ω–∏-–ü—É—Ö", "–ß–µ–±—É—Ä–∞—à–∫–∞", "–ë—É—Ä–∞—Ç–∏–Ω–æ", "–ó–æ–ª—É—à–∫–∞"],
							"answer": 3
						},
						{
							"taskId": 3,
							"type": 1,
							"description": "–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –ª–∏—à–Ω–µ–µ –ø–æ —Å–º—ã—Å–ª—É?",
							"variants": ["–í–æ—Ä–æ–±–µ–π", "–°–∏–Ω–∏—Ü–∞", "–ü—Ç–∏—Ü–∞", "–õ–∞—Å—Ç–æ—á–∫–∞", "–ì–æ–ª—É–±—å"],
							"answer": 2
						},
						{
							"taskId": 4,
							"type": 2,
							"description": "–∫–æ–≥–¥–∞ —á–µ–≥–æ-—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –º–∞–ª–æ, –∏–Ω–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –µ–≥–æ –æ—Å—Ç–∞–ª–æ—Å—å ¬´—Å –≥—É–ª—å–∫–∏–Ω –Ω–æ—Å¬ª. –ê —á–µ–π —ç—Ç–æ –Ω–æ—Å?",
							"answer": ["–≥–æ–ª—É–±—å", "–≥–æ–ª—É–±—è", "–≥–æ–ª—É–±–∏–Ω—ã–π"]
						},
						{
							"taskId": 5,
							"type": 1,
							"description": "–ö–æ–≥–¥–∞ —Ä–µ–±—è—Ç–∞ —Ö–æ–¥–∏–ª–∏ –≤ –¥–µ—Ç—Å–∫–∏–π —Å–∞–¥, –∏—Ö –Ω–∞–∑—ã–≤–∞–ª–∏ –ê–Ω–¥—Ä–µ–π, –ö–æ–ª—è, –°–∞—à–∞, –§–µ–¥—è, –õ—ë—à–∞. –ö–æ–≥–¥–∞ –æ–Ω–∏ –ø–æ—à–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ –ø–µ—Ä–≤—ã–π –∫–ª–∞—Å—Å, —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∑–∞–ø–∏—Å–∞–ª–∞ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É –∏—Ö –ø–æ–ª–Ω—ã–µ –∏–º–µ–Ω–∞. –ß—å—ë –∏–º—è –æ–∫–∞–∑–∞–ª–æ—Å—å –ø–µ—Ä–≤—ã–º –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º —Å–ø–∏—Å–∫–µ?",
							"variants": ["–ê–Ω–¥—Ä–µ—è", "–õ—ë—à–∏", "–ö–æ–ª–∏", "–§–µ–¥–∏", "–°–∞—à–∏"],
							"answer": 4
						},
						{
							"taskId": 6,
							"type": 1,
							"description": "–ß—Ç–æ –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–∞ —É—Ä–æ–∫–µ?",
							"variants": ["–ü–∏—Å–∞—Ç—å —Å–ª–æ–≤–∞", "–°–ª—É—à–∞—Ç—å —É—á–∏—Ç–µ–ª—è", "–ß–∏—Ç–∞—Ç—å —É—á–µ–±–Ω–∏–∫", "–°—á–∏—Ç–∞—Ç—å –≤–æ—Ä–æ–Ω", "–†–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏"],
							"answer": 3
						},
						{
							"taskId": 7,
							"type": 2,
							"description": "–ì—Ä–∏—à–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø—Ä–∏—Ö–æ–¥–∏–ª –≤ —à–∫–æ–ª—É —Å –Ω–µ–≤—ã—É—á–µ–Ω–Ω—ã–º–∏ —É—Ä–æ–∫–∞–º–∏. –£—á–∏—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª –ì—Ä–∏—à–µ, —á—Ç–æ –ø–æ—Ä–∞ –≤–∑—è—Ç—å—Å—è –∑–∞... –ó–∞–∫–æ–Ω—á–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
							"answer": ["–≥–æ–ª–æ–≤—É", "–≥–æ–ª–æ–≤–∞", "—É–º"]
						},
						{
							"taskId": 8,
							"type": 1,
							"description": "–ö–∞–∫—É—é –±—É–∫–≤—É –Ω–µ–ª—å–∑—è –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –∑–∞–ø–∏—Å—å –ø_–ª–∏—Ç—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–ª–æ–≤–æ?",
							"variants": ["–ê", "–û", "–ò", "–´", "–ï"],
							"answer": 4
						},
						{
							"taskId": 9,
							"type": 1,
							"description": "–í –Ω–∞–∑–≤–∞–Ω–∏–∏ –Ω–∞—Å–µ–∫–æ–º–æ–≥–æ —Å—Ç—Ä–µ–∫–æ–∑–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ ‚Äì –∫–æ–∑–∞. –í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –µ—â—ë –æ–¥–Ω–æ –∂–∏–≤–æ–µ —Å—É—â–µ—Å—Ç–≤–æ?",
							"variants": ["–ñ–∞–≤–æ—Ä–æ–Ω–æ–∫", "–ë—É–π–≤–æ–ª", "–£—Ç–∫–æ–Ω–æ—Å", "–¢–∞—Ä–∞–∫–∞–Ω", "–î–∏–∫–æ–±—Ä–∞–∑"],
							"answer": 1
						},
						{
							"taskId": 10,
							"type": 1,
							"description": "–ù–∞–π–¥–∏—Ç–µ –≤ –æ—Ç–≤–µ—Ç–∞—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–µ–¥–º–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è: —Ä–∞–∑–±–∏—Ç—å—Å—è, –ø–æ—Ä–≤–∞—Ç—å—Å—è, –ø–µ—Ä–µ–≥–æ—Ä–µ—Ç—å, —Å–µ—Å—Ç—å. –ö–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç –æ–∫–∞–∑–∞–ª—Å—è –ª–∏—à–Ω–∏–º?",
							"variants": ["–õ–∞–º–ø–æ—á–∫–∞", "–ó–µ—Ä–∫–∞–ª–æ", "–ö–∞—Ä–∞–Ω–¥–∞—à", "–ë–∞—Ç–∞—Ä–µ–π–∫–∞", "–†—É–±–∞—à–∫–∞"],
							"answer": 2
						}
					]
				}
			};
			return allSubjs;
		},

		subjects() {
			let allSubjs = [];
			for (const subject in this.loadSubjects) {
				allSubjs.push(subject);
			}
			return allSubjs;
		},

		testTasks() {
			let curSubj = this.currentSubj;
			let curTest = this.currentTest;
			if (curSubj) {
				return (this.loadSubjects[curSubj])[curTest];
			}
		}
	},

	watch: {
		currentTest(value) {
			if (value !== null) {
				return this.$store.state.testMode = true;
			} else {
				return this.$store.state.testMode = false;
			}
		}
	},

	methods: {
		getTests(subj) {
			const fullSubj = this.loadSubjects[subj];
			const subjectKeys = [];
			Object.entries(fullSubj).forEach(el => {
				subjectKeys.push(el[0]);
			});
			this.currentSubj = subj;
			this.subjTests = subjectKeys;
		},
		loadTest(test) {
			this.currentTest = test;
		}
	}
};
</script>

<style scoped>
main {
	width: 100%;
	display: flex;
	justify-content: center;
	flex-direction: row;
	gap: 3%;
}

article {
	display: flex;
	flex-direction: column;
	width: 40%;
	height: max-content;

	gap: 1.5rem;
}

aside {
	width: 60%;
}

ul {
	display: grid;
	justify-content: center;
	align-content: center;

	gap: 10%;
	grid-auto-flow: column;
}

li {
	place-self: center;
	cursor: pointer;
}

li:hover {
	box-shadow: 0 2px #282828;
	transition: 0.3s;
}

.choose-subj {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: space-between;

	width: 100%;
	font-size: 18px;
}

.variants-list {
	display: flex;
	flex-direction: column;
	width: 100%;
}

.variants-title {
	display: flex;
	align-self: center;
	font-size: 1.3rem;
	font-size: 700;
}

.active {
	box-shadow: 0 2px #282828;
}
</style>